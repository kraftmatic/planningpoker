<!DOCTYPE html>
<html ng-app="PlanningPoker">

<head>
    <meta charset="UTF-8">
    <title>Planning Poker</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <script src="https://rawgit.com/nnnick/Chart.js/master/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/angular.chartjs/0.8.8/angular-chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/angular.chartjs/0.8.8/angular-chart.css"/>
    <script src="app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-poller/0.4.2/angular-poller.js"></script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Agile Estimation for Distributed Teams">
    <meta name="author" content="Rich Ashworth">
    <!--<link rel="icon" href="../../favicon.ico">-->

    <title>Planning Poker</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>
</head>

<body ng-controller="UserCtrl as user">

<div class="container">
    <div class="navbar-header">
        <strong class="navbar-brand">Planning Poker</strong>
    </div>
</div>

<div class="container">
    <!--Registration Screen-->
    <div ng-show="!inSession">
        <br>
        <div>
            <form name="nameEntry">

                Please enter your name:
                <input type="text" ng-model="userName" required="true" ng-minlength="2" ng-maxlength="50">
            </form>
        </div>
        <div ng-show="nameEntry.$valid">
            <form name="sessionEntry">
                Join Session:
                <input type="number" placeholder="session ID" ng-model="sessionId">
                <button ng-click="joinSession()" ng-disabled="sessionId < 1">
                    Join Session
                </button>
                <button ng-click="createSession()">
                    Create Session
                </button>
            </form>
        </div>
    </div>

    <!--Voting Screen-->
    <div class="container" ng-show="inSession">
        <h5>
            Session: {{sessionId}}
        </h5>
        Please vote on the current item:
    </div>

    <div ng-show="inSession && !voted">
        <button data-ng-repeat="i in legalEstimates" ng-click="vote(i)">{{i}}</button>
    </div>

    <!--Results Screen-->
    <div ng-show="voted">
        <div>
            <canvas id="bar" class="chart chart-bar" chart-data="[resultsdata]" chart-labels="labels"></canvas>
        </div>
        <div>
            <table>
                <tr ng-repeat="result in votingResults">
                    <td>{{result.userId}}</td>
                    <td>{{result.estimateValue}}</td>
                </tr>
            </table>
        </div>

        <div ng-show="isAdmin">
            <button ng-click="reset()">Next Estimate</button>
        </div>
    </div>
</div><!-- /.container -->


</body>
</html>